05 June 2008

"oauth/test.php" is the main place to see things work: register a consumer, get a request token, have the user (i.e., you) authorize the token, exchange the authorized request token for an access token, and then access protected resources.  There are a bunch of hidden fields in this file, such as "oauth_nonce" and the information used to register the consumer (name and email).  Even more important, the "oauth_consumer_key" is a hidden field in this file, so you're going to need to change that if you want to test the code.

Other notes:
#The SQL install script tries to run whenever cpgOAuth.php is executed, and that file is included in all of the lower-case files in the oauth/ directory.  So if you don't want 6 extra tables added to your MySQL database (3 or 4 of which are necessary for CPG to act as an OAuth server, and 2 or 3 of which can probably be left out in the future), you should consider editing "oauth/store/mysql/mysql.sql".
#The OAuth server automatically calculates the oauth_signature right now, because it's easiest to test things that way.  The consumer needs to calculate this and include it in the requests (e.g., for a request token), but right now this step is skipped.
#Still lots of "$superCage->post->getRaw()", which basically defeats the purpose of Inspekt.  This will change, mostly by being replaced with "...->getMatched()", it's just a temporary measure for my convenience.
#Various parts of the code from anyMeta still contains a bunch of regular superglobals (e.g., $_SERVER and $_SESSION), which will be fixed as well.
#The consumer secret is never revealed to the consumer.  This is needed to calculate the oauth_signature string, although it can just always be an empty string.  I'm still kind of unsure about how to handle this part.