<!doctype html public "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Frequently Asked Questions (FAQ) - Coppermine Photo Gallery - Documentation &amp; Manual</title>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
<meta name="language"    content="en">
<meta name="copyright"   content="Coppermine dev team">
<meta name="description" content="Frequently Asked Questions (FAQ)">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta name="MSSmartTagsPreventParsing" content="true">
<meta http-equiv="imagetoolbar" content="no">
<!--
  SVN version info:
  -----------------
  Coppermine version: 1.5.0
  $Revision$
  $LastChangedBy$
  $Date$
-->
<link rel="stylesheet" type="text/css" href="style.css" media="all" />
<link rel="stylesheet" type="text/css" href="screen.css" media="screen" />
<link rel="stylesheet" type="text/css" href="print.css" media="print" />
<script src="script.js" type="text/javascript"></script>
</head>
<body>
<script type="text/javascript">
  cpgDocHeader();
</script>
<div id="toc">
<script type="text/javascript">
  cpgDocToc();
</script>
<noscript>
<a href="toc.htm">Table of Contents</a>
</noscript>
</div>

<h1>Frequently Asked Questions (FAQ)</h1>
<p>With thousands of users, it's not surprising that so many of the same questions are asked on the <a href="http://coppermine-gallery.net/forum/">support forums for Coppermine Photo Gallery</a>. So, to help facilitate your website development, we've  included this basic <acronym class="tool" title="FAQ=Frequently Asked Questions">FAQ</acronym> file on common issues. Please be sure to refer to this FAQ first before posting questions on the forum. Failure to do so will, could, well ... , reflect unkindly on you and could result in some negative "<em>karma</em>."</p>
<p>This document is the <em>second best</em> resource to understand Coppermine - it's mandatory that you read the <a href="index.htm">documentation</a> first that comes with your Coppermine package.</p>
<p>The <a href="faq_fr.htm">FAQ are available in French</a> as well.</p>


<a name="faq_toc"></a><h2>Table of contents:<a href="#faq_toc" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h2>
<ul class="nomargin">
<li><strong>Upload</strong></li>
<ul class="nomargin">
<li><a class="content" href="#uploadGeneralTroubleshooting">General Upload Troubleshooting</a></li>
<li><a class="content" href="#httpUpload">I <strong>can't upload</strong> with the upload feature. What's wrong?</a></li>
</ul>

<li><strong>Error messages</strong></li>
<ul class="nomargin">
<li><a class="content" href="#EmptyDelimiter">I get the <strong>error</strong> &quot;<tt class="code">Warning: Empty Delimiter in search.inc.php line 33&quot;</tt>. What can I do?</a></li>
<li><a class="content" href="#ErrorUndefinedIndex">I have the error message <tt class="code">Warning: Undefined index: SCRIPT_NAME in /www.your-domain.com/include/init.inc.php on line 90</tt>. What can I do?</a></li>
<li><a class="content" href="#createWriteMYI">I get the error message <tt class="code">Can't create/write to file '/tmp/#sql_45d5_0.MYI'</tt>. What's wrong?</a></li>
<li><a class="content" href="#cantOpenMYI">I get the error message <tt class="code">Can't open file: 'yourPrefix_tableName.MYI'</tt> or similar. What's wrong?</a></li>
</ul>

<li><strong>Setup / Configuration</strong></li>
<ul class="nomargin">
<li><a class="content" href="#NoLastUploads">I don't want to show the <strong>last uploads</strong> and/or <strong>random pictures</strong> on the start page. How do I edit what's shown on the start page of coppermine?</a></li>
<li><a class="content" href="#removeFeature">I don't want to use the feature XYZ of Coppermine. How can I <strong>remove</strong> it?</a></li>
<li><a class="content" href="#customHeader">How do I add a <strong>custom header/footer</strong> to Coppermine?</a></li>
<li><a class="content" href="#createPublicAlbum">How do I create an <strong>album</strong> that <strong>anyone</strong> can add photos to?</a></li>
<li><a class="content" href="#BackupDatabase">How can I <strong>backup</strong> my coppermine database?</a></li>
<li><a class="content" href="#noFullsizePopup">The <strong>fullsize-pic doesn't pop up</strong> when clicking on the intermediate size pic. What's wrong?</a></li>
<li><a class="content" href="#viewThumbnailsOnly">How can I let unregistered users see the <strong>thumbnails only</strong>, but not the actual pictures?</a></li>
<li><a class="content" href="#preventHotlinks">How can I prevent other sites linking directly to the pictures in my gallery instead of the gallery page?</a></li>
<li><a class="content" href="#changeLanguage">I tried to change the <strong>language</strong> on the config page, but it doesn't work. What's wrong?</a></li>
<li><a class="content" href="#onlyregisteredcomments">How do I let guests, not only registered users to put <strong>comments</strong> on pictures?</a></li>
<li><a class="content" href="#ordercategories">How do I change the <strong>order of categories</strong>?</a></li>
<li><a class="content" href="#cantDeletePic">I <strong>can't delete a certain picture</strong> with ftp. What can I do?</a></li>
<li><a class="content" href="#cantUploadBigPics">I <strong>can't upload big pics</strong>. What's wrong?</a></li>
<li><a class="content" href="#cookie">I can't <strong>login</strong> to Coppermine. What's wrong?</a></li>
<li><a class="content" href="#sortAlbum">How can I change the <strong>sorting order of the albums</strong>?</a></li>
<li><a class="content" href="#deleteIntermediates">I don't use the <strong>intermediate pictures</strong> anymore. How can I <strong>delete</strong> them to gain disk space?</a></li>
<li><a class="content" href="#howAlbumsFolderWork">How do <strong>albums and folders</strong> work in coppermine?</a></li>
<li><a class="content" href="#howMoveAlbum">How can I <strong>move albums from one category to another</strong>?</a></li>
<li><a class="content" href="#moveGallery">How do I <strong>move a gallery</strong>?</a></li>
<li><a class="content" href="#oneFileMultipleAlbums">How do I <strong>show the same file in multiple albums</strong>?</a></li>

</ul>
<li><strong>Add-ons / Modifications / Hacks</strong></li>
<ul class="nomargin">
<li><a class="content" href="#changeOrderEdit">How can I change the order of the pics when <strong>editing</strong> them?</a></li>
<li><a class="content" href="#rightHandMenu">How can I create a menu that's shown on the <strong>right side</strong> of the gallery?</a></li>
<li><a class="content" href="#jumpToPrivateAlbum">How can I send a user <strong>directly to his private album</strong> once he logs in?</a></li>
<li><a class="content" href="#registeredUsersOnly">How can I <strong>prevent unregistered user</strong> from viewing the gallery?</a></li>
<li><a class="content" href="#displayUploaderName">How can I <strong>display the name of the uploader</strong> with the picture info?</a></li>
<li><a class="content" href="#linksInCustomFields">How do I enable clickable <strong>links in custom user fields</strong>?</a></li>
<li><a class="content" href="#sortThumbsByCustomField">How can I <strong>sort the thumbnails by user defined (custom) fields</strong>?</a></li>
<li><a class="content" href="#iptcSupport">How do I <strong>enable IPTC support</strong>?</a></li>
<li><a class="content" href="#addFooterBeforePoweredBy">How can I <strong>add</strong> some output <strong>directly before</strong> the line &quot;Powered by Coppermine&quot;?</a></li>
<li><a class="content" href="#commonPHPerrors">Common PHP errors and how to get rid of them...</a></li>
<li><a class="content" href="#renameTemplateHtml">Can I <strong>rename template.html to template.php</strong> to include <strong>PHP code</strong> in my template?</a></li>
<li><a class="content" href="#preventPictureStealing">How can I prevent users from saving (stealing) my pictures?</a></li>
</ul>

<li><strong>Coppermine Support board</strong></li>
<ul class="nomargin">
<li><a class="content" href="#phpNewbie">I <strong>don't know</strong> PHP/mySQL...</a></li>
<li><a class="content" href="#lamesupport">I've posted my question a while ago, but <strong>nobody answers</strong>. What the...?</a></li>
<li><a class="content" href="#howtoask">How should I write my <strong>question</strong>?</a></li>
<li><a class="content" href="#firstSteps">I've run into trouble. What should I do first (<strong>before posting</strong> on the board)?</a></li>
<li><a class="content" href="#nonEnglishPosting">Hey, by looking at your profile I can see you're German/French/Whatever. Can I post a question in that <strong>language</strong>?</a></li>
<li><a class="content" href="#emailSupport">May I email/<acronym title="private message" class="tool">pm</acronym>/<acronym title="instant message" class="tool">im</acronym> you for <strong>support</strong>?</a></li>
<li><a class="content" href="#aboutTeam"><strong>Who</strong> are you anyway?</a></li>
</ul>
</ul>




<a name="upload"></a><h2>Upload<a href="#upload" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h2>

<a name="uploadGeneralTroubleshooting"></a>
<h3>General Upload Troubleshooting<a href="#uploadGeneralTroubleshooting" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h3>
<p>When troubleshooting uploads in CPG 1.5, you are advised to change the upload settings in the Groups console to 'Single uploads only' and to activate 'Debug mode' in the config console.  Changing this setting negates some of the error masking done in the multiple upload setting.  This will allow you to access more detailed error messages.</p>
<p><span class="important"><fieldset><legend><strong>First and foremost:</strong></legend>Check your folder and file permission settings on the /albums, /albums/userpics, and /albums/edit directories.  All should be 777 or 755.</span><br /><br />If you don't know what we mean by <em>777</em> or <em>755</em>,  you need to do a Google search on <em>UNIX file permissions</em>. Windows has a similar set of file permissions. You can usually set these permissions using an <em>FTP client</em> (If you don't know what an <em>FTP client</em> is, Google for <em>FTP client</em>).<br /> </fieldset> <br />
For those of you who skim over statements written in red letters, I will repeat to try to get your attention:
<br />  <br />
<span class="important"><fieldset><legend><strong>Yes, we are writing about something that could easily apply to YOU.</strong></legend>
<br />&nbsp;<br />
We repeat -- check your permissions on the <tt class="code">/albums</tt>, <tt class="code">/albums/userpics</tt>, and <tt class="code">/albums/edit</tt> directories.  All should be 777 or 755.
<br />&nbsp;<br />
Yes, we do want you to check the permissions of each folder even if you think you have already done this. Yes, we mean it.<br /></fieldset></span>
</p>
<p><strong>NOTE:</strong> HTTP uploads are limited by the restrictions placed upon them in PHP's configuration.</p>
<br />&nbsp;<br />
<strong>Things to check:</strong> <font size="-2">(if you are webhosted, you will need to consult with your webhost regarding the following settings.)</font>
<ol>
<li><strong>max_input_time</strong>- 60 seconds is the default time limit for uploading files.<br />This time limit includes the time it takes for the files to upload, so if you exceed this limit, the file will not even parse, and the browser will not get a response. You can workaround this by trying to upload smaller or fewer files, or you can try uploading over broadband. The best solution, of course, is to increase the time limit to something more in line with your needs.</li>
<li><strong>upload_max_filesize</strong> - 2MB is the default limit for individual files.</li>
<li><strong>post_max_size</strong> - 8MB is the default limit for post requests.</li>
<li><strong>memory_limit</strong> - 8MB is the default size.</li>
<li>PHP's <strong>LimitRequestBody</strong> - 512KB default limit. (mainly an issue on Redhat/Apache systems.  Found in /etc/http/conf.d)<br />In general, upload_max_filesize &lt; post_max_size &lt; memory_limit in order for uploads to function properly. Coppermine may warn you if a file exceeds upload_max_filesize, but it cannot warn you if the total size of all the files exceeds the post limit or the memory limit.</li>
<li><strong>file_uploads</strong> - This determines whether or not PHP will allow file uploads. It must be set to &quot;On&quot;.</li>
<li><strong>upload_tmp_dir</strong> - This specifies the temporary directory where PHP stores uploaded files.</li>
</ol>

<p>The most common issue caused by this setting is an open_basedir warning.  In this situation, your server administrator has restricted the files that PHP can work with to a certain directory.  If he does not create and specify a temporary directory within the open_basedir restriction, PHP will attempt to use the OS temporary directory, and it will be rebuffed by the open_basedir restriction.</p>

<p><strong>Some notes about the different types of upload mechanisms available in CPG 1.3 (or better):</strong><br />
Multiple HTTP uploads are designed to handle a small number of files, and have an upper limit of 10 files at a time.  Therefore, they are not well suited for the uploading of large numbers of files unless you are running your own webserver or have control over the php.ini configuration.
<br />
If you are looking to upload more than 15 or 20 files at a time, you should consider the batch add process or the XP_Publisher utility.  Each has its own drawbacks and advantages.
<br />
The batch add process is fast, but it creates quite a load on the server and, as a result, you may experience timeouts causing your uploads to terminate prematurely.  XP Publisher, on the otherhand, is considerably slower, but it limits the load on the server.  It also circumvents many of the pitfalls caused by limitations set in the php.ini configuration by uploading each file in the batch being uploaded as an individual post request.</p>

<br /><div class="totop">[<a href="#top" class="nodeco">top of page</a>]</div><hr />

<a name="httpUpload"></a>
<h3>I <strong>can't upload</strong> with the upload feature. What's wrong?<a href="#httpUpload" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h3>
<p>If you experience the error message: <tt class="code">No picture was uploaded. If you have really selected a picture to upload, check that the server allows file uploads...</tt>, check if there's a problem with HTTP uploads on your server - this feature may have been disabled or improperly configured. In <a href="#VersionPHP">phpinfo()</a>, check that "file_uploads" is ON, "upload_max_filesize" is something like 2M and "upload_tmp_dir" is a valid directory!</p><hr />

<a name="error_essages"></a><h2>Error Messages<a href="#error_essages" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h2>

<a name="EmptyDelimiter"></a>
<h3>I get the <strong>error</strong> &quot;<tt class="code">Warning: Empty Delimiter in search.inc.php line 33&quot;</tt>. What can I do?<a href="#EmptyDelimiter" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h3>
<p>Edit the file include/search.inc.php<br />
Look for the line with<br /><tt class="code">$charset = $CONFIG['charset'] == 'language file' ? $lang_charset : $CONFIG['charset'];</tt><br />
Replace it with :<br />
<tt class="code">$charset = $CONFIG['charset'] == 'language file' ? $GLOBALS['lang_charset'] : $CONFIG['charset'];</tt></p><hr />



<a name="ErrorUndefinedIndex"></a>
<h3>I have the error message <tt class="code">Warning: Undefined index: SCRIPT_NAME in /www.your-domain.com/include/init.inc.php on line 90</tt>. What can I do?<a href="#ErrorUndefinedIndex" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h3>
<p>Try to edit the file include/init.inc.php:<br />
change<br />
<pre>$PHP_SELF = isset($_SERVER['REDIRECT_URL']) ? $_SERVER['REDIRECT_URL'] : $_SERVER['SCRIPT_NAME'];</pre>
to<br />
<pre>$PHP_SELF = $_SERVER['PHP_SELF'];</pre>
</p><hr />



<a name="createWriteMYI"></a>
<h3>I get the error message <tt class="code">Can't create/write to file '/tmp/#sql_45d5_0.MYI'</tt>. What's wrong?<a href="#createWriteMYI" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h3>
<p><strong>The problem:</strong><br />
MySQL can't create a temporary file for the result set in the given temporary directory.</p>
<p><strong>The solution:</strong><br />
Alter the tmpdir variable to point to a writable directory.  It requires changing the tmpdir line in the my.cnf file, usually in the [mysqld] section (tmpdir = /writable/dir, where /writable/dir is a directory to which you can write).</p>
<p><strong>Ask your webhost to make the above changes.</strong></p>
<br /><div class="totop">[<a href="#top" class="nodeco">top of page</a>]</div><hr />

<a name="cantOpenMYI"></a>
<h3>I get the error message <tt class="code">Can't open file: 'yourPrefix_tableName.MYI'</tt> or similar. What's wrong?<a href="#cantOpenMYI" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h3>
<p><strong>The problem:</strong><br />
Your table is corrupted.</p>
<p><strong>The solution:</strong><br />
This is not a coppermine issue, but a mySQL issue. It just may affect a database table used by Coppermine.<br />
Use your website's Control Panel to repair the table, or use phpMyAdmin to execute this sql query: <tt class="code">REPAIR TABLE yourPrefix_tableName</tt><br />
(Replace yourPrefix_tableName with your table name, e.g. cpg145_pictures)</p>
<p><strong>If you don't understand the solution, ask your webhost to make the above changes.</strong></p>
<br /><div class="totop">[<a href="#top" class="nodeco">top of page</a>]</div><hr />



<a name="NoLastUploads"></a>
<h3>I don't want to show the <strong>last uploads</strong> and/or <strong>random pictures</strong>on the start page. How do I edit what's shown on the start page of coppermine?<a href="#NoLastUploads" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h3>
<p>Refer to the configuration section <a href="configuration.htm#admin_album_list_content">The content of the main page</a></p><hr />
<a name="removeFeature"></a>
<h3>I don't want to use the feature XYZ of Coppermine. How can I <strong>remove</strong> it?<a href="#removeFeature" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h3>
<p>Just remove the link; edit /themes/yourtheme/theme.php, look for the feature you want to remove and comment out the HTML code.<br />Example: if you want to remove the ecard-feature, just look for
<pre>&lt;td align=&quot;center&quot; valign=&quot;middle&quot; class=&quot;navmenu&quot; width=&quot;48&quot;&gt;
&lt;a href=&quot;{ECARD_TGT}&quot; title=&quot;{ECARD_TITLE}&quot;&gt;
&lt;img src=&quot;images/ecard.gif&quot; width=&quot;16&quot; height=&quot;16&quot; border=&quot;0&quot; align=&quot;absmiddle&quot; alt=&quot;{ECARD_TITLE}&quot;&gt;&lt;/a&gt;
&lt;/td&gt;</pre>
and replace it with<br />
<pre>&lt;!--&lt;td align=&quot;center&quot; valign=&quot;middle&quot; class=&quot;navmenu&quot; width=&quot;48&quot;&gt;
&lt;a href=&quot;{ECARD_TGT}&quot; title=&quot;{ECARD_TITLE}&quot;&gt;
&lt;img src=&quot;images/ecard.gif&quot; width=&quot;16&quot; height=&quot;16&quot; border=&quot;0&quot; align=&quot;absmiddle&quot; alt=&quot;{ECARD_TITLE}&quot;&gt;&lt;/a&gt;
&lt;/td&gt;--&gt;</pre></p><hr />
<a name="customHeader"></a>
<h3>How do I add a <strong>custom header/footer</strong> to Coppermine?<a href="#customHeader" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h3>
<p>There are these files to look for:
<ul>

<li>if you want to add static html-content (for example your site logo), edit <tt class="code">/themes/yourtheme/template.html</tt> - add/remove anything you want, but be sure to leave everything in that is in brackets.</li>
<li>if you want dynamic content (or want to add PHP-code), edit the file <tt class="code">/themes/yourtheme/theme.php</tt></li>
<li>if you want the edit the color scheme of a theme to match the &quot;look-and-feel&quot; of your site, edit <tt class="code">/themes/yourtheme/style.css</tt></li>
<li>for experienced php users, cpg 1.5.x introduces an alternative method of adding intricate custom headers or footers. Create a php file for your header and one for your footer using a format similar to the following: <br />
<pre><blockquote>&lt;?php <br />
echo &lt;&lt;&lt;EOT  <br /><br />
Enter your header/footer content here.  What you enter here will be displayed<br />at the top of my page if it is a header and at the bottom of my page if it is a footer. <br /> <br />
EOT; <br />
?></blockquote></pre>

<p>Name them myheader.php and myfooter.php, or any other original name that doesn't already exist in the cpg folder and save them into the Coppermine root folder. Then (with admin controls enabled), click on the CONFIG tab, scroll to <strong><em>Themes settings</em></strong> and  enter the name of your header and footer files in the appropriate include fields at the bottom of this section. (NOTE: You will still need to edit the template.html file of your theme to remove any unwanted logos and entries above the menu sections.)</li> </p>


</ul></p><hr />
<a name="createPublicAlbum"></a>
<h3>How do I create an <strong>album</strong> that <strong>all users</strong> can add photos to?<a href="#createPublicAlbum" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h3>
<p>(Assuming that you have already created at least one category and/or one album where the uploaded photos should go to):
<ul>
<li>Log in as admin</li>
<li>Confirm that you have the display of admin controls turned on</li>
<li>Select the Album list button</li>
<li>If you placed the album in a category, choose the category you created the album in</li>
<li>Next to the appropriate album, click on &quot;properties&quot;</li>
<li>Set &quot;Visitors can upload pictures&quot; to &quot;yes&quot; and click &quot;update album&quot;</li>
<li>Provide an upload link in your navigation menu if it's not already there (check /themes/yourtheme/theme.php)</li>
<li>Next, click on the Groups tab</li>
<li>For the group named &quot;anonymous&quot; - set the allowable space usage quota and upload rights</li>

</ul></p><hr /><a name="BackupDatabase"></a>
<h3>How can I <strong>backup</strong> my coppermine database?<a href="#BackupDatabase" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h3>
<p>Currently, there are no built-in backup solutions for coppermine available, yet. To backup your directory/file structure, you must use the good old ftp method and a tool like <a href="http://www.phpmyadmin.net/" class="external">phpMyAdmin</a> to backup your database (Many webhosts that offer mySQL also offer a pre-installed version of phpMyAdmin - if so, use that!). PhpMyAdmin is easy to install: just download the distribution, unzip it to your harddrive, edit one config file and upload it to your server. (NOTE: Some webhosts offer backup services. You should check if this service is available to you, first.)<br /><br />
Here's a quick &quot;how to backup a database with phpMyAdmin&quot; primer:
<ul>
<li>Download the software if it's not available to you, install it (remember to password-protect it).</li>
<li>Point your browser to the location you installed it on.</li>
<li>Select the database you want to back up from the dropdown list in the left frame.</li>
<li>In &quot;View dump (schema) of database&quot; select the table(s) you want to back up (press CTRL to select more than one table).</li>
<li>Mark &quot;Structure and data&quot;</li>
<li>Check &quot;Save as file&quot;</li>
<li>Check &quot;zipped&quot;</li>
<li><strong>DON'T</strong> check &quot;Add 'drop table'&quot; - your database will be erased, if you do.</li>
<li>Press &quot;go&quot;</li>
<li>Save the file on your harddisk (depending on the speed of your connection this could take a while).</li>
</ul></p><hr />
<a name="noFullsizePopup"></a>
<h3>The <strong>fullsize-pic doesn't pop up</strong> when clicking on the intermediate size pic. What's wrong?<a href="#noFullsizePopup" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h3>
<p>If you are certain that your original file is larger in dimensions than the settings you selected for intermediate sized pictures, there's a good chance that you over-edited your theme's template/html file: make sure that the line <tt class="code">&lt;script type=&quot;text/javascript&quot; src=&quot;scripts.js&quot;&gt;&lt;/script&gt;</tt> inside /themes/yourtheme/template.html is still there to make the pop-up window work...<br />
The &lt;head&gt;-part of your template file should look like this:<br />
<pre>&lt;head&gt;
&lt;title&gt;{TITLE}&lt;/title&gt;
&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset={CHARSET}&quot; /&gt;
{META}
&lt;link rel=&quot;stylesheet&quot; href=&quot;themes/default/style.css&quot; /&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;scripts.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;</pre>
- If you're still unsure about this, just compare your theme's template.html with the default theme that comes with coppermine .</p><hr />
<a name="viewThumbnailsOnly"></a>
<h3>How can I let unregistered users see the <strong>thumbnails only</strong>, but not the actual pictures?<a href="#viewThumbnailsOnly" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h3>
<p>Edit displayimage.php and add<br /><tt class="code">if (!USER_ID) cpg_die(ERROR, 'You need to register to access this page', __FILE__, __LINE__);</tt><br />just before<br />
<pre>/**************************************************************************
* Local functions definition
**************************************************************************/</pre></p><hr />
<a name="preventHotlinks"></a>
<h3>How can I prevent other sites from linking directly to the pictures in my gallery instead of the gallery page?<a href="#preventHotlinks" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h3>
<p>IF your webhost supports the use of .htaccess files (you will need to ask them), you can prevent &quot;hotlinking&quot; by creating an .htaccess file in the albums folder.<br />
Open your text editor and add the following lines, then save the file as .htaccess :
<pre>SetEnvIfNoCase Referer &quot;^http://www.yourdomian.com/&quot; locally_linked=1
SetEnvIfNoCase Referer &quot;^http://yourdomain.com/&quot; locally_linked=1
SetEnvIf Referer &quot;^$&quot; locally_linked=1
&lt;FilesMatch &quot;\.(gif|png|jpe?g)$&quot;&gt;
  Order Allow,Deny
  Allow from env=locally_linked
&lt;/FilesMatch&gt;</pre>
This will only work on linux/unix and apache servers AND only if you're allowed to use /htaccess files by your webhost or if you run your own server and &quot;mod_rewrite&quot; is enabled on your server . </p><hr />

<a name="changeLanguage"></a>
<h3>I tried to change the <strong>language</strong> on the config page, but it doesn't work. What's wrong?<a href="#changeLanguage" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h3>
<p>&quot;Character encoding&quot; is probably set (or has been set sometime ago) to UTF-8 on your config page.<br />
When UTF-8 is selected, Coppermine chooses your language file based on your browser configuration and stores the value in a cookie. This overrides the value stored in the CONFIG.<br />
<strong>To fix that:</strong><br />
<ul>
<li>Set &quot;Character encoding&quot; to Default (language file)</li>
<li>Then call the script with <tt class="code">http://yoursite.com/coppermine_dir/index.php?lang=xxx</tt> (this will reset the cookie)
</ul></p><hr />
<a name="onlyregisteredcomments"></a>
<h3>How do I allow all guests, not just registered users, to add <strong>comments</strong> to pictures?<a href="#onlyregisteredcomments" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h3>
<p><ul>
<li>log in as admin</li>
<li>admin controls enabled</li>
<li>groups</li>
<li>&quot;Anonymous&quot; - &quot;Can post comments&quot; - &quot;yes&quot;</li>
<li>Apply modifications</li>
</ul>
To change the settings on a per album basis, first, complete the above steps, then):
<ul>
<li>Log in as admin</li>
<li>Confirm that you have admin controls enabled</li>
<li>In Category view, click on the album of choice</li>
<li>Select &quot;Properties&quot;</li>
<li>Set&quot;Permissions for this album&quot; - &quot;Visitors can post comments&quot; - &quot;Yes&quot;</li>
<li>&quot;Update album&quot;</li>
</ul></p><hr />

<a name="ordercategories"></a>
<h3>How do I change the <strong>order of categories</strong>?<a href="#ordercategories" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h3>
<p><ul>
<li>Log in as admin</li>
<li>from the admin mode menu strip</li>
<li>select the categories menu button</li>
<li>use the &quot;arrow up&quot;- and &quot;arrow down&quot;-buttons to change the order of categories</li>
</ul></p><hr />
<a name="cantDeletePic"></a>
<h3>I <strong>can't delete a certain picture</strong> with ftp. What can I do?<a href="#cantDeletePic" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h3>
<p>If you can't delete a file or picture with your FTP software, it is not Coppermine that won't allow you to delete the picture; it is your FTP server. The problem is in the configuration of your server. Try to delete your picture from within the script.</p>
<p>If PHP on your server is running under user "nobody," then all files created by any PHP script (this is not specific to Coppermine) will be owned by "nobody". There is no way to change that.</p>
<table border="0" cellspacing="2" cellpadding="2" class="bordl"><tr><td valign="top" align="left"><p class="fliess"> <strong>IMPORTANT:</strong>  0777 (CHMOD 777) should not be the default mode for directories because it may present a security risk, if your gallery is running on a shared server and PHP safe mode is not enabled, anyone with an account on the same server could possibly delete your pictures. There have been several threads on this issue on the Menalto Gallery forum and several users have seen their gallery hacked and destoyed because of this. This issue is not specific to Photo galleries, it applies to all PHP scripts that create directories. As long as someone has <em>write</em> access to a directory, s/he could conceiveably delete any file it contains, even if that person doesn't have write access to the file itself.<br />&nbsp;<br />
We would prefer to have users complaining LOUDLY and REPEATEDLY that they have to constantly contact their sysadmin to set this or reset that or even uninstall Coppermine, and have THIS as an issue and electing to switch to another gallery script because of this inconvenience, rather than learn of one person devastated in finding that all his/her pictures have been erased by a hacker.<br />&nbsp;<br />
Don't agree? Read this:<br />
<a href="http://www.zend.com/manual/function.mkdir.php" class="external">http://www.zend.com/manual/function.mkdir.php</a><br />
<a href="http://www.zend.com/manual/function.chmod.php" class="external">http://www.zend.com/manual/function.chmod.php</a><br />
before thinking of posting an argument in this forum.<br />&nbsp;
<br />Ultimately it is the decision of the sysadmin on how s/he will elect to run PHP as an Apache module and if all files/dir created by PHP are to be owned by &quot;nobodyquot;. So sysadmins who have set up their servers as such, are in no position to complain when asked to remove certain files or directories.<br />&nbsp;<br />
<blockquote><em>On the webhost this site is running on, everything works fine when directory are created with mode 755 and all files/dir created by PHP are owned by the chezgreg user which is the user I use when connecting by FTP. Also if one of the file/directory on my site has a mode of 777, the server will shutdown my site and send me an email warning me that this is unsafe.</em><br />&nbsp;<br />
Greg</blockquote></p></td></tr></table></p><hr />
<a name="cantUploadBigPics"></a>
<h3>I <strong>can't upload big pics or files</strong>. What's wrong?<a href="#cantUploadBigPics" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h3>
<p>The max. size of uploadable pics and/or files is limited by various settings - to find out why you can't upload big picks, check the following:
<ul>
<li>Make sure you have enough webspace left (remember that you need space for the full size pic, the intermediate size pic and the thumbnail!)</li>
<li>When logged in as admin check your &quot;Group&quot; settings: the groups (even the admin group!) have quota limits that can be configured there</li>
<li>Browser time-out: the commonly-used Internet Explorer has a time-out function: if your upload isn't finished within a certain period, the browser will time-out (this applies especially to dial-up connections)</li>
<li>There'are a maximum limits set in the PHP config of your server or webhosting server. If you're with a webhost there's very little you can do about it except ask them if they could help you out. If you're running your own server, check php.ini and look for <tt class="code">LimitRequestBody</tt> - this value (in bytes) in the max upload allowed by php/html</li>
</ul></p><hr />
<a name="cookie"></a>
<h3>I can't <strong>login</strong> to Coppermine. What's wrong?<a href="#cookie" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h3>
<p>This is most likely a cookie issue:
<ul>
<li>If you're running Internet Explorer 6, you'll have to enable the acceptance of cookies. Click on &quot;Tools&quot; - &quot;Internet Options&quot; - &quot;Privacy&quot; and add your site to the list of sites that are trusted, or set the slider to a lower level.</li>
<li>Sometimes IE will not handle Cookies properly. Close your browser, try deleting all local cookies manually and start your browser again</li>
<li>Check if you're running a software that interferes with acceptance of cookies like personal firewalls (ZoneAlarm, Tiny, Cookie Washer etc.) and turn them off to see if cookies are accepted then</li>
<li>Try using another browser (like <a href="http://www.opera.com/" class="external">Opera</a>, which is rather small to download and can be removed easily). It's a generally a good idea to have some different browsers on your local machine to check if your site is displayed correctly not only in your favourite browser</li>
<li>If you're using subdomains and the dev version of coppermine or some mod on a different subdomain (like gallery.yoursite.com and board.yoursite.com) this could also cause problems: a subdomain is a different domain (in fact foo.com and bar.com are subdomains of the <acronym class="tool" title="top level domain">tld</acronym> &quot;.com&quot;, so regarding cookies they are as different domains as bbs.yoursite.com and comics.yoursite.com). Of course you can &quot;hack some sense&quot; into the scripts, but usually bbs are hard to trick to make them more hack-proof.</li>
</ul></p><hr />

<a name="sortAlbum"></a>
<h3>How can I change the <strong>sorting order of the albums</strong>?<a href="#sortAlbum" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h3>
<p>By default the albums appear in the order they were created. If you want to adjust the sorting order, do the following:
<ul>
<li>Log in as admin;</li>
<li>select &quot;Albums&quot; from the admin menu strip;</li>
<li>choose the category whose albums you want to sort from the dropdown list;</li>
<li>highlight an album by clicking on it once;</li>
<li>then use the up <img src="../images/move_up.gif" width="13" height="11" border="0" alt="" /> and down <img src="../images/move_down.gif" width="13" height="11" border="0" alt="" /> buttons to change the position. </li>
<li>Click &quot;apply modifications&quot;.</li>
<li>Confirm the message &quot;Are you sure you want to make these modifications ?&quot; with &quot;OK&quot;</li>
</ul></p><hr />

<a name="deleteIntermediates"></a>
<h3>I don't use the <strong>intermediate pictures</strong> anymore. How can I <strong>delete</strong> them to gain disk space?<a href="#deleteIntermediates" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h3>
<p>Why would you want to do that? Deleting the intermediate pics would disable many of the great features that make coppermine what is today. The option to send ecards, to add comments to pics, to rate pics, to display exif information, just to name a few. If you really want to save space, opt to delete your original files using the Admin Tools menu option.  Doing this will allow your users to enjoy all of coppermine's features with the exception of viewing full-sized images.  In the end, it will probably save you more space as well.  Just be sure to set your intermediate sized picture settings in CONFIG to a size that you can live with.</p>
<p>If you really must remove the intermediate sized pics, search the mods and hacks board in the coppermine forum to learn how.</p><hr />

<a name="howAlbumsFolderWork"></a>
<h3>How do <strong>albums and folders</strong> work in coppermine?<a href="#howAlbumsFolderWork" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h3>
<ol>
<li>When you create an album, it is a dynamic 'virtual' album.  Coppermine doesn't create a physical folder for this album on the server's hard drive, it leaves the pictures where you put them on the server, and uses the database to know which pic belongs in which album. You can move pics from album to album in Coppermine, but it's all done in the database, the pics are never moved on the server.</li>
<li>When you upload by html, using the 'upload' link, coppermine places the pic (and the thumb and normal size copies) in the 'userpics' directory.</li>
<li>When you upload by ftp, you should place the pics into folders that you create within the 'albums' folder, but never in the 'userpics' folder. The 'userpics' folder is reserved for html uploads only.  You can create as many folders/sub-folders for FTP uploads as you want. (Many webhosting services will recommend that you keep the number of files per folder under 500 in order to maximize speed and certain functions. This means you can upload up to 500/3 files in each folder.) You can name these folders anything you want, but we do recommend mirroring the category/album structures that you have created, whenever possible, to facilitate ease of use and site management.</li>
<li>When you batch add files that you have already FTP'd to your site, coppermine asks you what album you want to put the pics in, but it leaves the pics where they are on the server.</li>
</ol>
<br /><div class="totop">[<a href="#top" class="nodeco">top of page</a>]</div><hr />

<a name="howMoveAlbum"></a>
<h3>How can I <strong>move albums from one category to another</strong>?<a href="#howMoveAlbum" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h3>
<ul>
<li>log in as admin</li>
<li>create categories (using category manager from admin menu)</li>
<li>go to the index page of your gallery</li>
<li>click "Properties" next to the album thumbnail</li>
<li>From the dropdown list &quot;Album category&quot;, choose the category the album should go to</li>
<li>Click &quot;Update Album&quot;</li>
</ul>
<br /><div class="totop">[<a href="#top" class="nodeco">top of page</a>]</div><hr />

<a name="moveGallery"></a>
<h3>How can I <strong>move my gallery to another host</strong>?<a href="#moveGallery" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h3>
<ul>
<li>Backup your files: FTP-download your complete coppermine-folder to your hard drive</li>
<li>use a tool like phpMyAdmin to get a dump (backup) of your mySQL database entries. More info <a href="http://coppermine-gallery.net/faq.php?q=BackupDatabase#BackupDatabase">here</a></li>
<li>verify your backup is working: check if the mySQL-dump contains all data (open the zipped dump file and use a text editor to view it)</li>
<li>on the new server: FTP-upload your coppermine-folder to the new server</li>
<li>CHMOD the folder /albums to 755 or 777 (depending on your server config]</li>
<li>restore the mySQL table by running the queries of the dump files you created in step 2</li>
<li>test-drive your coppermine gallery - you should be done</li>
</ul>
<br /><div class="totop">[<a href="#top" class="nodeco">top of page</a>]</div><hr />

<a name="oneFileMultipleAlbums"></a>
<h3>How do I <strong>show the same file in multiple albums</strong>?<a href="#oneFileMultipleAlbums" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h3>
<p>The <strong>Album Keyword</strong> in <a href="http://coppermine-gallery.net/demo/cpg14x/docs/index.htm#album_prop">Album Properties</a> is used to link images from one album into another. Using this method, files/images can be displayed in various albums while the file itself need only exists in one album on your webserver.  You simply upload a file to one album as you would normally do, then assign one or more keywords to the file. The keyword function reads blank spaces between words as a 'break' and assumes that these words are separate words.  If you must use phrases for your keywords, connect them with an underscore or by using the ascii space holder ctrl+Alt+0160 (NOTE: the latter option only works with latin based character sets.)  Each album can only have ONE (1) keyword or keyword phrase.  All pictures residing in different albums that you would like to be displayed in this album must have the same keyword or keyword phrase in their respective keyword fields.  Pictures, unlike albums, can have multiple keywords or keyword phrases separated by spaces. This provides you with the option to display pictures in many albums.  For the visitor of these albums, it will appear as if the file/image had been uploaded to each. </p>
<p>If you use album keywords to display images/files in more than one album, enabling the Config option, Show number of linked files, will display additional information for the album stats. That is, if an album doesn't only contain &quot;regular&quot; files, but files linked via the "album keyword" option as well, the number of linked files will be displayed separately like this "3 files, last one added on Oct 07, 2004<em>, 3 linked files, 6 files total</em>".</p>
<br /><div class="totop">[<a href="#top" class="nodeco">top of page</a>]</div><hr />

<a name="hacks"></a><h2>Add-ons / Modifications / Hacks<a href="#hacks" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h2>
<a name="letUserSelectTheme"></a>
<a name="changeOrderEdit"></a>
<h3>How can I change the order of the pics <u>when <strong>editing</strong> them</u>?<a href="#letUserSelectTheme" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h3>
<p>By default, the pics are shown alphabetically when you edit them. To change the sorting order to &quot;by date&quot;, edit <tt class="code">editpics.php</tt> and change<br />
<pre>$sql = &quot;SELECT p.*,a.category FROM {$CONFIG['TABLE_PICTURES']} as p &quot;.
                           &quot;INNER JOIN {$CONFIG['TABLE_ALBUMS']} as a &quot;.
                           &quot;ON a.aid=p.aid &quot;.
                           &quot;WHERE p.aid = '$album_id' &quot;.
                           &quot;ORDER BY p.filename LIMIT $start, $count&quot;;
                $result = cpg_db_query($sql);</pre><br />to<br />
<pre>$sql = &quot;SELECT p.*,a.category FROM {$CONFIG['TABLE_PICTURES']} as p &quot;.
                           &quot;INNER JOIN {$CONFIG['TABLE_ALBUMS']} as a &quot;.
                           &quot;ON a.aid=p.aid &quot;.
                           &quot;WHERE p.aid = '$album_id' &quot;.
                           &quot;ORDER BY pid LIMIT $start, $count&quot;;
                $result = cpg_db_query($sql);</pre><br /></p><br />
<div class="totop">[<a href="#top" class="nodeco">top of page</a>]</div><hr />
<a name="rightHandMenu"></a>
<h3>How can I create a menu that's shown on the <strong>right side</strong> of the gallery?<a href="#rightHandMenu" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h3>
<p>When the template.html is read, it is split in 2. What is before the {GALLERY} tag is output by the pageheader function, what is after by the pagefooter function.<br />
If your menu is in the &quot;footer&quot; you need to modify your theme.php file <br />
<pre>   $template_vars = array(
      '{LANG_DIR}' => $lang_text_dir,
      '{TITLE}' => $CONFIG['gallery_name'].' - '.$section,
      '{CHARSET}' => $CONFIG['charset'] == 'language file' ? $lang_charset : $CONFIG['charset'],
      '{META}' => $meta,
      '{GAL_NAME}' => $CONFIG['gallery_name'],
      '{GAL_DESCRIPTION}' => $CONFIG['gallery_description'],
      '{MAIN_MENU}' => theme_main_menu(),
      '{ADMIN_MENU}' => theme_admin_mode_menu()
   );

   echo template_eval($template_header, $template_vars);</pre>
   will become
<pre>   $template_vars = array(
      '{LANG_DIR}' => $lang_text_dir,
      '{TITLE}' => $CONFIG['gallery_name'].' - '.$section,
      '{CHARSET}' => $CONFIG['charset'] == 'language file' ? $lang_charset : $CONFIG['charset'],
      '{META}' => $meta,
      '{GAL_NAME}' => $CONFIG['gallery_name'],
      '{GAL_DESCRIPTION}' => $CONFIG['gallery_description'],
   );

   echo template_eval($template_header, $template_vars);</pre>
and<br /><tt class="code">echo $template_footer;</tt><br />
will become<br />
<pre>   $template_vars = array(
      '{MAIN_MENU}' => theme_main_menu(),
      '{ADMIN_MENU}' => theme_admin_mode_menu()
   );

   echo template_eval($template_footer, $template_vars);</pre>
</p><hr />
<a name="jumpToPrivateAlbum"></a>
<h3>How can I send a user <strong>directly to his private album</strong> once he logs in?<a href="#jumpToPrivateAlbum" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h3>
<p>edit<br /><tt class="code">login.php</tt><br />and search for<br />
<tt class="code">pageheader($lang_login_php['login'],&quot;&lt;META http-equiv=\&quot;refresh\&quot; content=\&quot;3;url=$referer\&quot;&gt;&quot;);</tt><br />
<br />and add <strong>before</strong> it<br />
<tt class="code">$referer = 'index.php?cat='.(FIRST_USER_CAT+$USER_DATA['user_id']); </tt><br /></p><hr />
<a name="registeredUsersOnly"></a>
<h3>How can I <strong>prevent unregistered users</strong> from viewing the gallery?<a href="#registeredUsersOnly" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h3>
<p>edit<br /><tt class="code">displayimage.php</tt><br />and search for<br />
<pre>/**************************************************************************
* Local functions definition
**************************************************************************/</pre>
<br />and add <strong>before</strong> it<br />
<tt class="code">if (!USER_ID) cpg_die(ERROR, 'You need to register to access this page', __FILE__, __LINE__);</tt><br /></p><hr />
<a name="displayUploaderName"></a>
<h3>How can I <strong>display the name of the uploader</strong> with the picture info?<a href="#displayUploaderName" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h3>
<p><strong>Warning</strong>: this is quite a complicated hack for a newbie to perform! Make sure to back up your original files before attempting this.<br />Edit displayimage.php and search for:<br />
<tt class="code">   $info[$lang_picinfo['Filename']]   = htmlspecialchars($CURRENT_PIC_DATA['filename']);</tt><br />add after it:<br />
<tt class="code">   $info[$lang_picinfo['Username']]   = htmlspecialchars($CURRENT_PIC_DATA['user_name']);</tt>.<br />
Then open /include/functions.inc.php and search for following in function get_pic_data():<br />
<tt class="code">      if($select_columns != '*') $select_columns .= ', title, caption';</tt><br />and replace it with:<br />
<tt class="code">      if($select_columns != '*') $select_columns .= ', title, caption, user_name';</tt>.<br />
After that search for:<br />
<tt class="code">      $result = cpg_db_query("SELECT $select_columns from {$CONFIG['TABLE_PICTURES']} WHERE aid='$album' $approved $ALBUM_SET ORDER BY $sort_order $limit");</tt><br />
and replace it with:<br />
<tt class="code">      $result = cpg_db_query("SELECT $select_columns from {$CONFIG['TABLE_PICTURES']} AS p LEFT JOIN {$CONFIG['TABLE_USERS']} AS u ON u.user_id = p.owner_id WHERE p.aid='$album' $approved $ALBUM_SET ORDER BY $sort_order $limit");</tt><br />Then you have to add the language string for the username. Open /lang/yourlang.php and search for:<br />
<tt class="code">$lang_picinfo = array(</tt><br />
and add after that:<br />
<tt class="code">        'Username' => 'Username',</tt><br />
Also you need to execute this query in MySQL (with a tool like <a href="http://www.phpmyadmin.net">phpMyAdmin</a>):<br />
<tt class="code">ALTER TABLE `cpg11d_pictures` ADD INDEX ( `owner_id` );</tt><br />
(<strong>NOTE:</strong> If your database table_prefix is not &quot;cpg11d_&quot;, you will need to change it in the query)<br /></p><hr />
<a name="linksInCustomFields"></a>
<h3>How do I enable clickable <strong>links in custom user fields</strong>?<a href="#linksInCustomFields" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h3>
<p>Edit displayimage.php and change<br />
<tt class="code">$info[$CONFIG['user_field'.$i.'_name']] = make_clickable($CURRENT_PIC_DATA['user'.$i]); </tt><br />
into<br />
<tt class="code">$info[$CONFIG['user_field'.$i.'_name']] = bb_decode($CURRENT_PIC_DATA['user'.$i]); </tt><br />&nbsp;<br />
This will allow you to use BBCodes in the custom fields: you can then have something like<br />
<tt class="code">[url]http://www.somesite.com/foo/bar.php?whatever=42[/url]</tt><br />
or<br />
<tt class="code">[url=http://www.somesite.com/foo/bar.php?whatever=42]link to some site![/url]</tt><br />in your custom user fields (the display of which, of course, has to be enabled in the config page, begin with).<br /></p><hr />

<a name="sortThumbsByCustomField"></a>
<h3>How can I <strong>sort the thumbnails by user defined (custom) fields</strong>?<a href="#sortThumbsByCustomField" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h3>
<p><ol>
<li>Edit /includes/functions.inc.php<br />
change<br />
<pre>$sort_array = array('na' => 'filename ASC', 'nd' => 'filename DESC', 'da' => 'pid ASC', 'dd' => 'pid DESC'); </pre>
to<br />
<pre>   $sort_array = array(
      'na' => 'filename ASC',
      'nd' => 'filename DESC',
      'da' => 'pid ASC',
      'dd' => 'pid DESC',
      'f1a' => 'user1 ASC',
      'f1d' => 'user1 DESC',
      'f2a' => 'user2 ASC',
      'f2d' => 'user2 DESC',
      'f3a' => 'user3 ASC',
      'f3d' => 'user3 DESC',
      'f4a' => 'user1 ASC',
      'f4d' => 'user1 DESC'
   );
</pre></li>
<li>Edit /themes/yourtheme/theme.php<br />
<ul>
<li>change<br />
<pre>   // The sort order options are not available for meta albums
   if ($sort_options){

      $param = array(
         '{ALBUM_NAME}' => $album_name,
         '{AID}' => $aid,
         '{PAGE}' => $page,
         '{NAME}' => $lang_thumb_view['name'],
         '{DATE}' => $lang_thumb_view['date'],
         '{SORT_NA}' => $lang_thumb_view['sort_na'],
         '{SORT_ND}' => $lang_thumb_view['sort_nd'],
         '{SORT_DA}' => $lang_thumb_view['sort_da'],
         '{SORT_DD}' => $lang_thumb_view['sort_dd'],
         );</pre>
<br />
to<br />
<pre>   // The sort order options are not available for meta albums
   if ($sort_options){

      $param = array(
         '{ALBUM_NAME}' => $album_name,
         '{AID}' => $aid,
         '{PAGE}' => $page,
         '{NAME}' => $lang_thumb_view['name'],
         '{DATE}' => $lang_thumb_view['date'],
         '{SORT_NA}' => $lang_thumb_view['sort_na'],
         '{SORT_ND}' => $lang_thumb_view['sort_nd'],
         '{SORT_DA}' => $lang_thumb_view['sort_da'],
         '{SORT_DD}' => $lang_thumb_view['sort_dd'],
         // Exxodus Sorting
         '{FIELD1}' => $CONFIG['user_field1_name'],
         '{FIELD2}' => $CONFIG['user_field2_name'],
         '{FIELD3}' => $CONFIG['user_field3_name'],
         '{FIELD4}' => $CONFIG['user_field4_name'],
         // Exxodus Sorting
         );</pre>&nbsp;
</li>
<li>modify the lines after <tt class="code">$template_thumb_view_title_row </tt> like this:<br />
<pre>// HTML template for title row of the thumbnail view (album title + sort options)
// Exxodus (Adding Sorting by UserField)
$template_thumb_view_title_row = &lt;&lt;&lt;EOT

         &lt;table width=&quot;100%&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot;&gt;
         &lt;tr&gt;
            &lt;td width=&quot;100%&quot; class=&quot;statlink&quot;&gt;&lt;h2&gt;{ALBUM_NAME}&lt;/h2&gt;&lt;/td&gt;
            &lt;td&gt;&lt;img src=&quot;images/spacer.gif&quot; width=&quot;1&quot;&gt;&lt;/td&gt;
            &lt;td class=&quot;sortorder_cell&quot;&gt;
               &lt;table height=&quot;100%&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot;&gt;
               &lt;tr&gt;
                  &lt;td class=&quot;sortorder_options&quot;&gt;{NAME}&lt;/td&gt;
                  &lt;td class=&quot;sortorder_options&quot;&gt;&lt;span class=&quot;statlink&quot;&gt;
                  &lt;a href=&quot;thumbnails.php?album={AID}&page={PAGE}&sort=na&quot; title=&quot;{SORT_NA}&quot;&gt;&+&&lt;/a&gt;/&lt;/span&gt;&lt;/td&gt;
                  &lt;td class=&quot;sortorder_options&quot;&gt;&lt;span class=&quot;statlink&quot;&gt;
                  &lt;a href=&quot;thumbnails.php?album={AID}&page={PAGE}&sort=nd&quot; title=&quot;{SORT_ND}&quot;&gt;&-&&lt;/a&gt;&lt;/span&gt;&lt;/td&gt;
               &lt;/tr&gt;
               &lt;tr&gt;
                  &lt;td class=&quot;sortorder_options&quot;&gt;{DATE}&lt;/td&gt;
                  &lt;td class=&quot;sortorder_options&quot;&gt;&lt;span class=&quot;statlink&quot;&gt;
                  &lt;a href=&quot;thumbnails.php?album={AID}&page={PAGE}&sort=da&quot; title=&quot;{SORT_DA}&quot;&gt;&+&&lt;/a&gt;/&lt;/span&gt;&lt;/td&gt;
                  &lt;td class=&quot;sortorder_options&quot;&gt;&lt;span class=&quot;statlink&quot;&gt;
                  &lt;a href=&quot;thumbnails.php?album={AID}&page={PAGE}&sort=dd&quot; title=&quot;{SORT_DD}&quot;&gt;&-&&lt;/a&gt;&lt;/span&gt;&lt;/td&gt;
               &lt;/tr&gt;
               &lt;/table&gt;
            &lt;/td&gt;
            &lt;td&gt;&lt;img src=&quot;images/spacer.gif&quot; width=&quot;10&quot;&gt;&lt;/td&gt;
            &lt;td class=&quot;sortorder_cell&quot;&gt;
               &lt;table height=&quot;100%&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot;&gt;
               &lt;tr&gt;
                  &lt;td class=&quot;sortorder_options&quot;&gt;{FIELD1}&lt;/td&gt;
                  &lt;td class=&quot;sortorder_options&quot;&gt;&lt;span class=&quot;statlink&quot;&gt;
                  &lt;a href=&quot;thumbnails.php?album={AID}&page={PAGE}&sort=f1a&quot;&gt;&+&&lt;/a&gt;/&lt;/span&gt;&lt;/td&gt;
                  &lt;td class=&quot;sortorder_options&quot;&gt;&lt;span class=&quot;statlink&quot;&gt;
                  &lt;a href=&quot;thumbnails.php?album={AID}&page={PAGE}&sort=f1d&quot;&gt;&-&&lt;/a&gt;&lt;/span&gt;&lt;/td&gt;
               &lt;/tr&gt;
               &lt;tr&gt;
                  &lt;td class=&quot;sortorder_options&quot;&gt;{FIELD2}&lt;/td&gt;
                  &lt;td class=&quot;sortorder_options&quot;&gt;&lt;span class=&quot;statlink&quot;&gt;
                  &lt;a href=&quot;thumbnails.php?album={AID}&page={PAGE}&sort=f2a&quot;&gt;&+&&lt;/a&gt;/&lt;/span&gt;&lt;/td&gt;
                  &lt;td class=&quot;sortorder_options&quot;&gt;&lt;span class=&quot;statlink&quot;&gt;
                  &lt;a href=&quot;thumbnails.php?album={AID}&page={PAGE}&sort=f2d&quot;&gt;&-&&lt;/a&gt;&lt;/span&gt;&lt;/td&gt;
               &lt;/tr&gt;
               &lt;/table&gt;
            &lt;/td&gt;
            &lt;td&gt;&lt;img src=&quot;images/spacer.gif&quot; width=&quot;10&quot;&gt;&lt;/td&gt;
            &lt;td class=&quot;sortorder_cell&quot;&gt;
               &lt;table height=&quot;100%&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot;&gt;
               &lt;tr&gt;
                  &lt;td class=&quot;sortorder_options&quot;&gt;{FIELD3}&lt;/td&gt;
                  &lt;td class=&quot;sortorder_options&quot;&gt;&lt;span class=&quot;statlink&quot;&gt;
                  &lt;a href=&quot;thumbnails.php?album={AID}&page={PAGE}&sort=f3a&quot;&gt;&+&&lt;/a&gt;/&lt;/span&gt;&lt;/td&gt;
                  &lt;td class=&quot;sortorder_options&quot;&gt;&lt;span class=&quot;statlink&quot;&gt;
                  &lt;a href=&quot;thumbnails.php?album={AID}&page={PAGE}&sort=f3d&quot;&gt;&-&&lt;/a&gt;&lt;/span&gt;&lt;/td&gt;
               &lt;/tr&gt;
               &lt;tr&gt;
                  &lt;td class=&quot;sortorder_options&quot;&gt;{FIELD4}&lt;/td&gt;
                  &lt;td class=&quot;sortorder_options&quot;&gt;&lt;span class=&quot;statlink&quot;&gt;
                  &lt;a href=&quot;thumbnails.php?album={AID}&page={PAGE}&sort=f4a&quot;&gt;&+&&lt;/a&gt;/&lt;/span&gt;&lt;/td&gt;
                  &lt;td class=&quot;sortorder_options&quot;&gt;&lt;span class=&quot;statlink&quot;&gt;
                  &lt;a href=&quot;thumbnails.php?album={AID}&page={PAGE}&sort=f4d&quot;&gt;&-&&lt;/a&gt;&lt;/span&gt;&lt;/td&gt;
               &lt;/tr&gt;
               &lt;/table&gt;
            &lt;/td&gt;
         &lt;/tr&gt;
         &lt;/table&gt;

EOT;</pre>

</li>
</ul>
</li>
</ol></p><hr />
<a name="iptcSupport"></a>
<h3>How do I <strong>enable IPTC support</strong>?<a href="#iptcSupport" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h3>
<p>Edit <tt class="code">/includes/picmgmt.inc.php</tt> and search for<br />
<tt class="code">        $imagesize = getimagesize($image);</tt><br />
replace this with:<br />
<pre>$imagesize = getimagesize($image,&$info);
$iptc = iptcparse($info["APP13"]);
if (is_array($iptc)) {
$caption.=$iptc['2#120'][0];
$title.=$iptc['2#105'][0];
(is_array($iptc['2#025'])) && ($keywords.=implode(" ", $iptc['2#025']));
}</pre>
NOTE: This hack hasn't been thoroughly tested, use at your own risk...!</p><hr />


<a name="addFooterBeforePoweredBy"></a>
<h3>How can I <strong>add</strong> some output <strong>directly before</strong> the line &quot;Powered by Coppermine&quot;?<a href="#addFooterBeforePoweredBy" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h3>
<p>Edit /themes/yourtheme/theme.php, look for <tt class="code">echo $template_footer</tt> and add the stuff you want to output in a line <strong>before</strong> it, like <tt class="code">print '&lt;span class=&quot;footer&quot;&gt;&lt;a href=&quot;http://www.mylink.com/foo.htm&quot;&gt;My Link&lt;/a&gt;&lt;/span&gt;';</tt></p><hr />
<a name="commonPHPerrors"></a>
<h3>Common PHP errors and how to get rid of them...<a href="#commonPHPerrors" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h3>
<p>There are a lot of people (especially PHP newbies) that post questions like <tt class="code">I get the error &quot;Parse error: parse error in XXX&quot;</tt> and don't know what to do about it. That's why I translated this list of common errors (and a solution how to fix them) from the original german article in <a href="http://www.drweb.de" class="external">Dr. Web</a> :<br />
<ul>
<li><tt class="code">Parse error: parse error in C:\Apache\htdocs\read.php on line 8</tt> - This error message refers to an error in the PHP syntax. You probably forgot to end a line with <tt class="code">;</tt> or you have too many brackets opened or closed (<tt class="code">{</tt>).</li>
<li><tt class="code">Fatal error: Call to unsupported/undefined function ... in C:\Apache\htdocs\read.php on line 8</tt> - This error means that the function your script was going to use isn't defined in the current PHP version with modules, or if you're using user-defined functions that your function hasn't been defined yet (this is usually caused if you forgot to include the function definition).</li>
<li><tt class="code">Warning: Wrong parameter ... for ... in C:\Apache\htdocs\read.php on line 8</tt> - you have handed over too many (or the wrong) parameters to the function. If it's a built-in php-function, check the <a href="http://www.php.net/manual/en/funcref.php" class="external"> manual; </a> to see if it's a user-defined function, then recheck your code.</li>
<li><tt class="code">Warning: Cannot add header information - header was already sent ... in C:\Apache\htdocs\read.php on line 4</tt> - you had some text output first (e.g. the doctype declaration or <tt class="code">&lt;html&gt;</tt>) and called the function header() afterwards. This is most often the case when using cookie stuff. Remember you can not use header() twice!</li>
<li><tt class="code">Parse error: parser stack overflow in C:\Apache\htdocs\read.php</tt> - PHP is out of memory - this usually happens if you built an eternal loop, especially when using include statements.</li>
<li><tt class="code">Warning: fopen("file.txt","r+") - No such file or directory</tt> - the requested file or directory doesn't exist. Check the spelling (accuracy counts here).</li>
<li><tt class="code">SAFE MODE Restriction in effect. The script whose uid is 531 is not allowed to access...</tt> - The safe mode is switched on. Some functions in the upload systems can't be used. Usually your webhost has put safe mode in place (often not correctly configured). Try switching silly_safe_mode on.</li>
</ul>
</p><hr />


<a name="renameTemplateHtml"></a>
<h3>Can I rename template.html to template.php to include PHP code in my template?<a href="#renameTemplateHtml" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h3>
<p>No, this is simply not the way coppermine works; for &quot;normal&quot; pages the name of the extension tells the webserver whether the file should be parsed by the PHP interpreter. The template files within the themes folder are not being parsed this way - the extension .html was just chosen to make editing easier. You can not have PHP code in the template file, no matter how you name it - that's all there is to it!</p><hr />

<a name="preventPictureStealing"></a>
<h3>How can I prevent users from saving (stealing) my pictures?<a href="#preventPictureStealing" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h3>
<p>You can not completely prevent users from stealing your pics - that's the way the www works: if a picture is being displayed in the browser, the user already has a copy of it on his hard drive. There are however some methods to make it harder for newbie users to steal your pics:
<ul>
<li>Add a watermark to your images before you upload them</li>
<li>Apply the built-in <a href="configuration.htm#admin_watermarking">watermark</a>. Please note that applying online-watermarks will result in a high server load.</li>
<li>Prevent Internet Explorer to show the image toolbar when a user hovers over a pic with the mouse. Edit themes/yourtheme/template.html, find <tt class="code">&lt;meta http-equiv="Pragma" content="no-cache" /&gt;</tt> and add after it <tt class="code">&lt;meta http-equiv="imagetoolbar" content="no" /&gt;</tt></li>
<li>Use one of the many &quot;no right-click&quot; scripts that are available.</li>
</ul>
<br /></p>
<br />
<div class="totop">[<a href="#top" class="nodeco">top of page</a>]</div><hr />



<br />&nbsp;<br />
<a name="own_server"></a><h2>I'm running my own server<a href="#own_server" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h2>

<br />&nbsp;<br />
<a name="support_board"></a><h2>Coppermine Support board<a href="#support_board" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h2>
These are (alas) not-so-frequently-asked-questions on the <a href="http://coppermine-gallery.net/forum/">support board</a>. Before posting on the Support board (or, in fact, any board), please read this section:
<a name="phpNewbie"></a>
<h3>I <strong>don't know</strong> PHP/mySQL...<a href="#phpNewbie" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h3>
<p>No problem with that, everyone stars as a newbie. <strong></strong>Just don't start each and every posting by stating &quot;I'm a newbie&quot;, &quot;I don't know anything about PHP&quot; etc.<br />Usually, one can acertain that from your question itself. There's no need to apologize. Most of us can still remember when we were in your shoes.</p><hr />
<a name="lamesupport"></a>
<h3>I've posted my question a while ago, but <strong>nobody answers</strong>. What the...?<a href="#lamesupport" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h3>
<p>The support board is <strong>not</strong> a hotline. Although there are many visitors to the site, only a few do actually support - on a unpaid, voluntary basis. Yes, we don't receive remuneratio for our contributions and we each have a life, a job, family and more. We are away sometimes, as well. So, please, be patient, read the docs and search the boards while you are waiting.<br />If you don't get an answer to your question:
<ul>
<li>make sure you have given us enough time to react (days, not hours!)</li>
<li>maybe nobody knows the answer to your problem</li>
<li>maybe your question has been asked very often</li>
<li>maybe your posting has been rude or impolite and you're ignored for that reason</li>
<li>maybe you requested a feature that requires a lot of coding, and none of those who are able to do it have a need for the feature</li>
</ul></p><hr />
<a name="howtoask"></a>
<h3>How should I write my <strong>question</strong>?<a href="#howtoask" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h3>
<p>If you have a question, make sure you provide as much information as possible:
<ul>
<li>a link to your gallery, with a test account ID and test account password, is most often the only way to help - provide it with your question, or even better: edit your profile on the support board and enter the url of your page there!</li>
<li>when addressing server issues, make sure to provide information on your server (<acronym class="tool" title="operation system">OS</acronym>, server, PHP version, mySQL version, gd lib version, safe mode on/off?). Most information can be retrieved by <a href="#VersionGD">phpinfo()</a></li>
<li>if it's a client issue, give us information at least to your client's <acronym class="tool" title="operation system">OS</acronym> and browser</li>
<li>Give us a screenshot, if necessary</li>
<li>use a proper subject line: state in the subject line what your question is actually about! Most supporters are reluctant to answer to a posting that has a silly subject line like &quot;I have a question&quot; or &quot;Install problem&quot; or &quot;feature request&quot; or &quot;help me pleeeeaaaase&quot;</li>
</ul></p><hr />
<a name="firstSteps"></a>
<h3>I've run into trouble. What should I do first (<strong>before posting</strong> on the board)?<a href="#firstSteps" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h3>
<p><ul>
<li>read the readme that comes with the coppermine distribution</li>
<li>read the documentation</li>
<li>read this FAQ</li>
<li><a href="http://coppermine-gallery.net/forum/index.php?action=search">Search</a> the support board</li>
<li>enable debug mode (log in as admin, config, debug mode)</li>
<li>choose the right support board: if you're running the phpnuke-port of coppermine, don't post in the support board for the standalone version and vice versa</li>
</ul></p><hr />
<a name="nonEnglishPosting"></a>
<h3>Hey, by looking at your profile I can see you're German/French/Whatever. Can I post a question in that <strong>language</strong>?<a href="#nonEnglishPosting" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h3>
<p>If you are posting in the English support boards, pPlease do not post in some other language - in this way, others may benefit from your question (and the answers you receive ), too. Don't be afraid to write &quot;poor english&quot; - no one will laugh at you, and most of our visitor's first language isn't english to begin with! There's a german support board available at <a href="http://forum.the-service.de/" class="external">http://forum.the-service.de/</a> - use it if you are more comfortable with German and you' not able to write in English!<br /></p>
<p>We have <a href="http://coppermine-gallery.net/forum/index.php?board=37.0">language-specific support boards</a> for Chinese, French, German, Italian and Persian.</p><hr />
<a name="emailSupport"></a>
<h3>May I email/<acronym title="private message" class="tool">pm</acronym>/<acronym title="instant message" class="tool">im</acronym> you for <strong>support</strong>?<a href="#emailSupport" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h3>
<p>No you mustn't! Post your question on the <a href="http://coppermine-gallery.net/forum/">Coppermine support board</a> (publicly) - if we (the community) don't find a solution <strong>and</strong> and individual supporter has the time <strong>and</strong> the individual supporter wants to do so, the supporter willll email/pm/im <em>you</em>!<br />
</p><hr />

<a name="aboutTeam"></a>
<h3><strong>Who</strong> are you anyway?<a href="#aboutTeam" title="Link to this section"><img src="pics/anchor.gif" width="15" height="9" border="0" alt="" /></a></h3>
<p>We are a group of people who decided to form a team to develop Coppermine further - check the <a href="http://coppermine-gallery.net/team/">team</a> page for details...</p><hr />


<br />&nbsp;<br />

<p>This FAQ is a work in progress, please contribute in the <a href="http://coppermine-gallery.net/forum/">Coppermine Photo Gallery Support Board</a> (don't contact me to ask for fixes of your Coppermine install). Please report any bugs, typos etc.<br />Check the online-version of this document for updates!<br />Have fun!</p>





<script type="text/javascript">
  cpgDocFooter(thisPage);
</script>

</body>
</html>